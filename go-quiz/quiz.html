<!DOCTYPE html>
<html>
<head>
<style>

@font-face {
    font-family: 'Space-Mono';
    src: url('SpaceMono-Regular.ttf') format('truetype');
    font-weight: 400;
    font-style: normal;
}

.clock {
    font-family: Space-Mono;
    font-size: 1.2em;
    position: absolute;
    left: 40px;
    bottom: 30px;
    color: red;
}

div.playground pre {
    font-size: 24px;
    font-family: Space-Mono;
}

div.playground span.num {
    font-size: 24px;
    font-family: Space-Mono;
}

</style>
    <script src="jquery-3.4.1.min.js"></script>
    <script>
	var duration = 30;

	function on_hashchange() {
	    // No code section
	    if ($('article.current div.playground').length == 0) {
		return;
	    }

	    // Already have a timer running
	    if ($('article.current .clock').length != 0) {
		return;
	    }

	    var v = $('<div class="clock">' + duration + '</div>');
	    $('article.current').append(v);
	    setTimeout(function() {
		countdown(v, duration);
	    }, 1000);
	}

	function countdown(v, n) {
	    n -= 1;
	    v.text(n);
	    if (n == 0) {
		return;
	    }

	    setTimeout(function() {
		countdown(v, n);
	    }, 1000);
	}

	$(function() {
	    $(window).on('hashchange', on_hashchange);
	});
    </script>
</head>
</html>
